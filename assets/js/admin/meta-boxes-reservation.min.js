jQuery(function(n){"use strict";var t={init:function(){this.edit_guest_fields(),this.charge_remain_deposit(),this.show_edit_reservation_total(),this.update_reservation_total(),this.datepicker(),this.show_edit_date(),this.update_date_total(),this.show_edit_reservation_room(),this.update_reservation_room()},edit_guest_fields:function(){n(".edit-address").on("click",function(t){t.preventDefault();var e=n(this).closest(".reservation-data-column"),i=e.find(".guest-data"),a=e.find(".edit-fields");i.hide(),a.show()})},show_edit_reservation_total:function(){n(".edit-total-icon").on("click",function(t){t.preventDefault(),n("#total-default").hide(),n("#total-edit").show()})},update_reservation_total:function(){n(".save-total-icon").on("click",function(t){t.preventDefault(),parseInt(n(n("#total-default .amount")[0]).text().match(/\d+(\.\d+)*/)[0].replace(/\./g,""))!==parseInt(n(n("#total-edit .new-total")[0]).val())?n(".save-reservation").click():(n("#total-default").show(),n("#total-edit").hide())})},show_edit_reservation_room:function(){n(".edit-room-icon").on("click",function(t){t.preventDefault(),n(".name-container-default").hide(),n(".qty").hide(),n(".room-qty").hide(),n(".name-container-edit").show()})},update_reservation_room:function(){n(".save-room-icon").on("click",function(t){t.preventDefault();var e=n(this).closest(".name-container-edit");e.prev().find(".room-name")[0].getAttribute("data-room_id")+"-0"!==n(e.find(".add-new-room-row")[0]).find("option:selected").val()?n(".save-reservation").click():(n(".name-container-default").show(),n(".qty").show(),n(".room-qty").show(),n(".name-container-edit").hide())})},charge_remain_deposit:function(){var i=n("#post");n(".charge-remain-deposit").on("click",function(t){if(t.preventDefault(),window.confirm(reservation_meta_params.i18n_do_remain_deposit_charge)){var e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name","hotelier_charge_remain_deposit"),e.setAttribute("value",1),i.append(e),i.submit()}})},datepicker:function(){var t=n("#date-from"),e=n("#date-to");t.datepicker({dateFormat:"yy-mm-dd",minDate:0,changeMonth:!0}),e.datepicker({dateFormat:"yy-mm-dd",minDate:1,changeMonth:!0})},show_edit_date:function(){n(".edit-date").on("click",function(t){t.preventDefault(),n(this).parent().next(".date-edit").show(),n(this).parent().hide()})},update_date_total:function(){n(".save-date").on("click",function(t){t.preventDefault();var e=new Date(n(this).parent().prev().text());(e=e.getFullYear()+"-"+("00"+(e.getMonth()+1)).slice(-2)+"-"+("00"+e.getDate()).slice(-2))!==n(this).prev().val()?n(".save-reservation").click():(n(this).parent().prev(".date-default").show(),n(this).parent().hide())})}};n(document).ready(function(){t.init()})});